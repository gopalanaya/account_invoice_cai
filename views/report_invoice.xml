<?xml version="1.0" ?>
<odoo>
<data>
<template id="report_invoice_cai">
  <t t-call="web.external_layout">
    <div class="page">
      <h2><t t-esc="o.company_id.name"/></h2>
      <p>R.T.N. <t t-esc="o.company_id.vat" /></p>
      <p><t t-esc="o.company_id.address" /></p>
      <p><t t-esc="o.company_id.email" /></p>
      <p>CAI: <t t-esc="o.cai_code"/></p>
      <p>RANGO: <t t-esc="o.range_start"/> al <t t-esc="o.range_end"/></p>
      <p>FECHA LIMITE EMISION: <t t-esc="o.cai_expiry.strftime('%d/%m/%Y')"/></p>

      <h3>FACTURA</h3>
      <p><t t-esc="o.name"/></p>
      <p>Fecha <t t-esc="o.invoice_date.strftime('%A, %d de %B de %Y')"/></p>
      <p>Cliente <t t-esc="o.partner_id.name"/></p>
      <p>R.T.N. <t t-esc="o.partner_id.vat"/></p>

      <!-- Item Table -->
      <table class="table table-sm">
        <thead>
          <tr>
            <th>#</th><th>Cantidad</th><th>Descripci√≥n</th><th>Precio Unitario</th><th>Descuentos</th><th>Sub-Total</th>
          </tr>
        </thead>
        <tbody>
          <t t-foreach="o.invoice_line_ids" t-as="line">
            <tr>
              <td><t t-esc="line.sequence"/></td>
              <td><t t-esc="line.quantity"/></td>
              <td><t t-esc="line.name"/></td>
              <td><t t-esc="line.price_unit"/></td>
              <td><t t-esc="line.discount"/></td>
              <td><t t-esc="line.price_subtotal"/></td>
            </tr>
          </t>
        </tbody>
      </table>

      <!-- Fiscal Summary -->
      <table>
        <tr><td>I.S.V. 15%</td><td><t t-esc="o.amount_tax_15"/></td></tr>
        <tr><td>I.S.V. 18%</td><td><t t-esc="o.amount_tax_18"/></td></tr>
        <tr><td>TOTAL A PAGAR</td><td><t t-esc="o.amount_total"/></td></tr>
        <tr><td colspan="2"><t t-esc="o.amount_to_text"/></td></tr>
      </table>

      <!-- Exemption Table -->
      <table>
        <tr><td>N. CORRELATIVO ORDEN COMPRA EXENTA</td><td><t t-esc="o.exempt_order_ref"/></td></tr>
        <tr><td>N. CORRELATIVO DE CONSTANCIA DE REGISTRO EXONERADO</td><td><t t-esc="o.exonerated_ref"/></td></tr>
        <tr><td>N. IDENTIFICATIVO DEL REGISTRO DE LA SAG</td><td><t t-esc="o.sag_ref"/></td></tr>
        <tr><td>IMPORTE EXONERADO</td><td><t t-esc="o.amount_exonerated"/></td></tr>
        <tr><td>IMPORTE EXENTO</td><td><t t-esc="o.amount_exempt"/></td></tr>
        <tr><td>IMPORTE GRAVADO 15% IMPORTE GRAVADO 18%</td><td><t t-esc="o.amount_taxable_15_18"/></td></tr>
      </table>

      <p>ORIGINAL</p>
    </div>
  </t>
</template>


<template id="report_invoice_document_cai" inherit_id="account.report_invoice_document">
  <xpath expr="//div[@class='row']" position="inside">
    <li class="cai_details" t-if="o.cai_id">
      <p><strong>CAI:</strong> <span t-esc="o.cai_id.cai_code"/></p>
      <p><strong>CAI Expiration:</strong> <span t-esc="o.cai_id.cai_expiry.strftime('%d-%m-%Y')"/></p>
      <p><strong>CAI Range:</strong> <span t-esc="o.cai_id.cai_range_start"/> - <span t-esc="o.cai_id.cai_range_end"/></p>
    </li>
  </xpath>

  <xpath expr="//div[@class='page']//h2" position="replace">
    <span class="text-center">Factura</span>
    <span t-esc="o.factura"> </span>
  </xpath>
</template>

</data>
</odoo>